<ion-header class="formation-header">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button fill="clear" (click)="goSelect()">
        <ion-icon name="arrow-back-outline"></ion-icon>
      </ion-button>
    </ion-buttons>

    <ion-title>Formazione</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="formation-content">

  <!-- HERO sticky stile Select -->
  <div class="formation-hero">
    <div class="hero-top">
      <div class="hero-title">
        <div class="h1">Formazione</div>
        <div class="h2">Scegli il modulo e visualizza lâ€™XI migliore</div>
      </div>

      <ion-button class="btn-ghost" fill="clear" size="small" (click)="goSelect()">
        Modifica rosa
      </ion-button>
    </div>

    <!-- Modulo (segment in stile pill) -->
    <div class="hero-module">
      <ion-segment class="seg-pills"
        [value]="module()"
        (ionChange)="onModuleChange($event)">
        <ion-segment-button value="4-4-2"><ion-label>4-4-2</ion-label></ion-segment-button>
        <ion-segment-button value="4-3-3"><ion-label>4-3-3</ion-label></ion-segment-button>
        <ion-segment-button value="4-5-1"><ion-label>4-5-1</ion-label></ion-segment-button>
        <ion-segment-button value="3-4-3"><ion-label>3-4-3</ion-label></ion-segment-button>
        <ion-segment-button value="3-5-2"><ion-label>3-5-2</ion-label></ion-segment-button>
        <ion-segment-button value="5-3-2"><ion-label>5-3-2</ion-label></ion-segment-button>
        <ion-segment-button value="5-4-1"><ion-label>5-4-1</ion-label></ion-segment-button>
      </ion-segment>
    </div>
  </div>

  <!-- CONTENT -->
  <div class="formation-wrap">

    <!-- CARD PITCH -->
    <div class="card pitch-card">
      <app-pitch
        [module]="module()"
        [starters]="starters()">
      </app-pitch>
    </div>

    <!-- CARD BENCH -->
    <div class="card bench-card">
      <div class="card-head">
        <div class="card-title">Panchina</div>
        <div class="card-sub">{{ bench().length }} giocatori</div>
      </div>

      <div class="bench-grid">
        <div class="bench-item" *ngFor="let p of bench()">
          <div class="bench-left">
            <div class="logo-wrap">
              <img *ngIf="p.teamLogo" class="team-logo" [src]="p.teamLogo" [alt]="p.team ?? 'team'">
              <div *ngIf="!p.teamLogo" class="team-fallback">{{ (p.team ?? '?') | slice:0:3 }}</div>
            </div>
          </div>

          <div class="bench-mid">
            <div class="bench-name">{{ p.name }}</div>
            <div class="bench-team">{{ p.team }}</div>
          </div>

          <div class="bench-right">
            <div class="pill role">{{ p.role }}</div>
            <div class="pill rating">{{ p.rating }}</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Spacer per fondo -->
    <div class="bottom-spacer"></div>
  </div>

</ion-content>
