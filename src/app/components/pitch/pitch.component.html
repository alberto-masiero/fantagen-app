<div class="pitch-wrapper">

<div class="pitch pitch-3d">
  <!-- SOLO overlay (bordo + vignetta). Non metterci dentro porte/linee -->
  <div class="markings"></div>

  <!-- LINEE -->
  <div class="halfway"></div>
  <div class="center-circle"></div>
  <div class="center-spot"></div>

  <!-- AREE -->
  <div class="penalty-area top"></div>
  <div class="penalty-area bottom"></div>

  <div class="goal-area top"></div>
  <div class="goal-area bottom"></div>

  <!-- DISCHETTO + ARCO -->
  <div class="penalty-spot top"></div>
  <div class="penalty-spot bottom"></div>

  <div class="penalty-arc top"></div>
  <div class="penalty-arc bottom"></div>

  <!-- PORTE (fuori da .markings, così non vengono coperte dall'overlay) -->
  <div class="goal top"></div>
  <div class="goal bottom"></div>

  <!-- ANGOLI -->
  <div class="corner tl"></div>
  <div class="corner tr"></div>
  <div class="corner bl"></div>
  <div class="corner br"></div>

  <!-- PLAYERS -->
  <ng-container *ngFor="let s of spots(); let i = index">
    <div class="spot" [style.top.%]="s.top" [style.left.%]="s.left">
      <div class="slot" [attr.data-slot]="i">
 <div class="player" *ngIf="playerAt(i) as p">

  <div class="badge-card vertical">

    <!-- 1️⃣ LOGO CENTRATO -->
    <div class="row-logo">
      <div class="logo-mini">
        <img *ngIf="p.teamLogo; else txtLogo" [src]="p.teamLogo" />
        <ng-template #txtLogo>
          <span>{{ (p.team ?? '?') | slice:0:3 }}</span>
        </ng-template>
      </div>
    </div>

    <!-- 2️⃣ MV + TREND -->
    <div class="row-mv">
      <div class="mv-pill">{{ p.rating | number:'1.2-2' }}</div>

      <div class="trend-inline"
           [class.up]="p.trend === '+'"
           [class.down]="p.trend === '-'"
           [class.eq]="p.trend === '='">
        <span *ngIf="p.trend === '+'">▲</span>
        <span *ngIf="p.trend === '-'">▼</span>
        <span *ngIf="p.trend === '='">—</span>
      </div>
    </div>

    <!-- 3️⃣ NOME -->
    <div class="row-name">
      <div class="name-inline">{{ p.name }}</div>
    </div>

    <!-- 4️⃣ PROGRESS TITOLARITÀ -->
    <div class="row-progress" *ngIf="p.Tit !== 'I' && p.Tit !== 'S'">
      <div class="tit-bar">
        <div class="tit-fill"
             [style.width.%]="p.Tit"
             [class.low]="p.Tit! < 40"
             [class.mid]="p.Tit! >= 40 && p.Tit! < 70"
             [class.high]="p.Tit! >= 70">
        </div>
      </div>
    </div>

    <!-- Flag infortunato/squalificato -->
    <div class="row-progress" *ngIf="p.Tit === 'I' || p.Tit === 'S'">
      <div class="flag" [class.inj]="p.Tit === 'I'" [class.sus]="p.Tit === 'S'">
        {{ p.Tit === 'I' ? 'Infortunato' : 'Squalificato' }}
      </div>
    </div>

  </div>
</div>




        <div class="player ghost" *ngIf="!playerAt(i)">
          <div class="jersey">
            <div class="collar"></div>
            <div class="num">+</div>
          </div>
          <div class="label">
            <div class="pname">slot</div>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
</div>
</div>
